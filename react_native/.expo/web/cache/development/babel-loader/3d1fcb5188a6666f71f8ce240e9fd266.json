{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vmage\\\\OneDrive\\\\Ruppin\\\\\\u05E9\\u05E0\\u05D4 \\u05D2\\\\\\u05E1\\u05DE\\u05E1\\u05D8\\u05E8 \\u05D1\\\\FinalProject\\\\react_native\\\\FunctionalComponents\\\\FCFacBookLogin.js\";\nimport * as React from 'react';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Facebook from 'expo-auth-session/providers/facebook';\nimport { ResponseType } from 'expo-auth-session';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nWebBrowser.maybeCompleteAuthSession();\nexport default function FCFacebookLogin() {\n  var _Facebook$useAuthRequ = Facebook.useAuthRequest({\n    clientId: '174194160927637',\n    responseType: ResponseType.Code\n  }),\n      _Facebook$useAuthRequ2 = _slicedToArray(_Facebook$useAuthRequ, 3),\n      request = _Facebook$useAuthRequ2[0],\n      response = _Facebook$useAuthRequ2[1],\n      promptAsync = _Facebook$useAuthRequ2[2];\n\n  React.useEffect(function () {\n    if ((response == null ? void 0 : response.type) === 'success') {\n      var code = response.params.code;\n      Alert.alert(response.params);\n    }\n  }, [response]);\n\n  function LoginTofacebook() {\n    var _useState, _useState2, picture, setPicture, _await$Facebook$logIn, type, token, expires, permissions, declinedPermissions, _response, res, message;\n\n    return _regeneratorRuntime.async(function LoginTofacebook$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _useState = useState([]), _useState2 = _slicedToArray(_useState, 2), picture = _useState2[0], setPicture = _useState2[1];\n            _context.prev = 1;\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(Facebook.initializeAsync(['174194160927637']));\n\n          case 4:\n            _context.next = 6;\n            return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync({\n              permissions: ['public_Profile']\n            }));\n\n          case 6:\n            _await$Facebook$logIn = _context.sent;\n            type = _await$Facebook$logIn.type;\n            token = _await$Facebook$logIn.token;\n            expires = _await$Facebook$logIn.expires;\n            permissions = _await$Facebook$logIn.permissions;\n            declinedPermissions = _await$Facebook$logIn.declinedPermissions;\n\n            if (!(type === 'success')) {\n              _context.next = 22;\n              break;\n            }\n\n            _context.next = 15;\n            return _regeneratorRuntime.awrap(fetch('https://graph.facebook.com/me?fields=id,name,email,picture&access_token=${token}'));\n\n          case 15:\n            _response = _context.sent;\n            _context.next = 18;\n            return _regeneratorRuntime.awrap(_response.json());\n\n          case 18:\n            res = _context.sent;\n            Alert.alert('Logged in!!!', \"Name:\" + res.name + \"\\nEmail:\" + res.email + \"\\nPicture:\" + res.picture.data.url);\n            _context.next = 23;\n            break;\n\n          case 22:\n            type === 'cancel';\n\n          case 23:\n            _context.next = 29;\n            break;\n\n          case 25:\n            _context.prev = 25;\n            _context.t0 = _context[\"catch\"](1);\n            message = _context.t0.message;\n            Alert.alert(\"Facebook login Failed \" + message);\n\n          case 29:\n            return _context.abrupt(\"return\", React.createElement(Button, {\n              disabled: !request,\n              title: \"Countinue with Facebook\",\n              onPress: function onPress() {\n                LoginTofacebook();\n              },\n              __self: this,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 43,\n                columnNumber: 13\n              }\n            }));\n\n          case 30:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this, [[1, 25]], Promise);\n  }\n}","map":{"version":3,"sources":["C:/Users/vmage/OneDrive/Ruppin/שנה ג/סמסטר ב/FinalProject/react_native/FunctionalComponents/FCFacBookLogin.js"],"names":["React","WebBrowser","Facebook","ResponseType","maybeCompleteAuthSession","FCFacebookLogin","useAuthRequest","clientId","responseType","Code","request","response","promptAsync","useEffect","type","code","params","Alert","alert","LoginTofacebook","useState","picture","setPicture","initializeAsync","logInWithReadPermissionsAsync","permissions","token","expires","declinedPermissions","fetch","json","res","name","email","data","url","message"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,UAAZ,MAA4B,kBAA5B;AACA,OAAO,KAAKC,QAAZ,MAA0B,sCAA1B;AACA,SAASC,YAAT,QAA6B,mBAA7B;;;AAIAF,UAAU,CAACG,wBAAX;AAEA,eAAe,SAASC,eAAT,GAA2B;AAAA,8BACGH,QAAQ,CAACI,cAAT,CAAwB;AAC7DC,IAAAA,QAAQ,EAAE,iBADmD;AAE7DC,IAAAA,YAAY,EAAEL,YAAY,CAACM;AAFkC,GAAxB,CADH;AAAA;AAAA,MAC/BC,OAD+B;AAAA,MACtBC,QADsB;AAAA,MACZC,WADY;;AAMtCZ,EAAAA,KAAK,CAACa,SAAN,CAAgB,YAAM;AAClB,QAAI,CAAAF,QAAQ,QAAR,YAAAA,QAAQ,CAAEG,IAAV,MAAmB,SAAvB,EAAkC;AAAA,UACtBC,IADsB,GACbJ,QAAQ,CAACK,MADI,CACtBD,IADsB;AAE9BE,MAAAA,KAAK,CAACC,KAAN,CAAYP,QAAQ,CAACK,MAArB;AACH;AACJ,GALD,EAKG,CAACL,QAAD,CALH;;AAOA,WAAeQ,eAAf;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,wBACkCC,QAAQ,CAAC,EAAD,CAD1C,6CACWC,OADX,kBACoBC,UADpB;AAAA;AAAA;AAAA,6CAGcpB,QAAQ,CAACqB,eAAT,CAAyB,CAAC,iBAAD,CAAzB,CAHd;;AAAA;AAAA;AAAA,6CAKkBrB,QAAQ,CAACsB,6BAAT,CAAuC;AACzCC,cAAAA,WAAW,EAAE,CAAC,gBAAD;AAD4B,aAAvC,CALlB;;AAAA;AAAA;AAIgBX,YAAAA,IAJhB,yBAIgBA,IAJhB;AAIsBY,YAAAA,KAJtB,yBAIsBA,KAJtB;AAI6BC,YAAAA,OAJ7B,yBAI6BA,OAJ7B;AAIsCF,YAAAA,WAJtC,yBAIsCA,WAJtC;AAImDG,YAAAA,mBAJnD,yBAImDA,mBAJnD;;AAAA,kBAQYd,IAAI,KAAK,SARrB;AAAA;AAAA;AAAA;;AAAA;AAAA,6CASmCe,KAAK,CAAC,kFAAD,CATxC;;AAAA;AASkBlB,YAAAA,SATlB;AAAA;AAAA,6CAU4BA,SAAQ,CAACmB,IAAT,EAV5B;;AAAA;AAUgBC,YAAAA,GAVhB;AAWYd,YAAAA,KAAK,CAACC,KAAN,CAAY,cAAZ,YAAoCa,GAAG,CAACC,IAAxC,gBAAuDD,GAAG,CAACE,KAA3D,kBAA6EF,GAAG,CAACV,OAAJ,CAAYa,IAAZ,CAAiBC,GAA9F;AAXZ;AAAA;;AAAA;AAaerB,YAAAA,IAAI,KAAK,QAAT;;AAbf;AAAA;AAAA;;AAAA;AAAA;AAAA;AAeasB,YAAAA,OAfb,eAeaA,OAfb;AAgBQnB,YAAAA,KAAK,CAACC,KAAN,4BAAqCkB,OAArC;;AAhBR;AAAA,6CAoBQ,oBAAC,MAAD;AACI,cAAA,QAAQ,EAAE,CAAC1B,OADf;AAEI,cAAA,KAAK,EAAC,yBAFV;AAGI,cAAA,OAAO,EAAE,mBAAM;AACXS,gBAAAA,eAAe;AAClB,eALL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cApBR;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA6BH","sourcesContent":["import * as React from 'react';\r\nimport * as WebBrowser from 'expo-web-browser';\r\nimport * as Facebook from 'expo-auth-session/providers/facebook';\r\nimport { ResponseType } from 'expo-auth-session';\r\nimport { Button } from 'react-native';\r\nimport { Alert } from 'react-native';\r\n\r\nWebBrowser.maybeCompleteAuthSession();\r\n\r\nexport default function FCFacebookLogin() {\r\n    const [request, response, promptAsync] = Facebook.useAuthRequest({\r\n        clientId: '174194160927637',\r\n        responseType: ResponseType.Code,\r\n    });\r\n\r\n    React.useEffect(() => {\r\n        if (response?.type === 'success') {\r\n            const { code } = response.params;\r\n            Alert.alert(response.params);\r\n        }\r\n    }, [response]);\r\n\r\n    async function LoginTofacebook() {\r\n        const [picture, setPicture] = useState([]);\r\n        try {\r\n            await Facebook.initializeAsync(['174194160927637']);\r\n            const { type, token, expires, permissions, declinedPermissions } =\r\n                await Facebook.logInWithReadPermissionsAsync({\r\n                    permissions: ['public_Profile']\r\n                });\r\n            if (type === 'success') {\r\n                const response = await fetch('https://graph.facebook.com/me?fields=id,name,email,picture&access_token=${token}');\r\n                let res = await response.json();\r\n                Alert.alert('Logged in!!!', `Name:${res.name}\\nEmail:${res.email}\\nPicture:${res.picture.data.url}`);\r\n            }\r\n            else { type === 'cancel' }\r\n        }\r\n        catch ({ message }) {\r\n            Alert.alert(`Facebook login Failed ${message}`);\r\n        }\r\n\r\n        return (\r\n            <Button\r\n                disabled={!request}\r\n                title=\"Countinue with Facebook\"\r\n                onPress={() => {\r\n                    LoginTofacebook();\r\n                }}\r\n            />\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}