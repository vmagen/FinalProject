{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\vmage\\\\OneDrive\\\\Ruppin\\\\\\u05E9\\u05E0\\u05D4 \\u05D2\\\\\\u05E1\\u05DE\\u05E1\\u05D8\\u05E8 \\u05D1\\\\FinalProject\\\\react_native\\\\FunctionalComponents\\\\FCFacBookLogin.js\";\nimport * as React from 'react';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Facebook from 'expo-auth-session/providers/facebook';\nimport { ResponseType } from 'expo-auth-session';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nWebBrowser.maybeCompleteAuthSession();\nexport default function FCFacebookLogin() {\n  var _Facebook$useAuthRequ = Facebook.useAuthRequest({\n    clientId: '874957936407265',\n    responseType: ResponseType.Token\n  }),\n      _Facebook$useAuthRequ2 = _slicedToArray(_Facebook$useAuthRequ, 4),\n      request = _Facebook$useAuthRequ2[0],\n      response = _Facebook$useAuthRequ2[1],\n      promptAsync = _Facebook$useAuthRequ2[2],\n      token = _Facebook$useAuthRequ2[3];\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      picture = _React$useState2[0],\n      setPicture = _React$useState2[1];\n\n  function LoginTofacebook() {\n    var res;\n    return _regeneratorRuntime.async(function LoginTofacebook$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(promptAsync());\n\n          case 2:\n            res = _context.sent;\n\n            if ((response == null ? void 0 : response.type) === 'success') {\n              console.log(\"ACCESS_TOKEN\", response.params.access_token);\n              loadDataFromServer(response.params.access_token);\n            } else (response == null ? void 0 : response.type) === 'error';\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  function loadDataFromServer(res) {\n    var details, userDetails;\n    return _regeneratorRuntime.async(function loadDataFromServer$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(fetch(\"https://graph.facebook.com/me?access_token=\" + res + \"&fields=id,name,email,picture\"));\n\n          case 2:\n            details = _context2.sent;\n            _context2.next = 5;\n            return _regeneratorRuntime.awrap(details.json());\n\n          case 5:\n            userDetails = _context2.sent;\n            console.log(\"name: \" + userDetails.name + \"\\npicture: \" + userDetails.picture.data.url);\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  }\n\n  return React.createElement(Button, {\n    disabled: !request,\n    title: \"Countinue with Facebook\",\n    onPress: LoginTofacebook,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  });\n}","map":{"version":3,"sources":["C:/Users/vmage/OneDrive/Ruppin/שנה ג/סמסטר ב/FinalProject/react_native/FunctionalComponents/FCFacBookLogin.js"],"names":["React","WebBrowser","Facebook","ResponseType","maybeCompleteAuthSession","FCFacebookLogin","useAuthRequest","clientId","responseType","Token","request","response","promptAsync","token","useState","picture","setPicture","LoginTofacebook","res","type","console","log","params","access_token","loadDataFromServer","fetch","details","json","userDetails","name","data","url"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,OAAO,KAAKC,UAAZ,MAA4B,kBAA5B;AACA,OAAO,KAAKC,QAAZ,MAA0B,sCAA1B;AACA,SAASC,YAAT,QAA6B,mBAA7B;;;AAIAF,UAAU,CAACG,wBAAX;AAEA,eAAe,SAASC,eAAT,GAA2B;AAAA,8BACUH,QAAQ,CAACI,cAAT,CAAwB;AACpEC,IAAAA,QAAQ,EAAE,iBAD0D;AAEpEC,IAAAA,YAAY,EAAEL,YAAY,CAACM;AAFyC,GAAxB,CADV;AAAA;AAAA,MAC/BC,OAD+B;AAAA,MACtBC,QADsB;AAAA,MACZC,WADY;AAAA,MACCC,KADD;;AAAA,wBAMRb,KAAK,CAACc,QAAN,EANQ;AAAA;AAAA,MAM/BC,OAN+B;AAAA,MAMtBC,UANsB;;AAQtC,WAAeC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACqBL,WAAW,EADhC;;AAAA;AACUM,YAAAA,GADV;;AAEI,gBAAI,CAAAP,QAAQ,QAAR,YAAAA,QAAQ,CAAEQ,IAAV,MAAmB,SAAvB,EAAkC;AAE9BC,cAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BV,QAAQ,CAACW,MAAT,CAAgBC,YAA5C;AACAC,cAAAA,kBAAkB,CAACb,QAAQ,CAACW,MAAT,CAAgBC,YAAjB,CAAlB;AACH,aAJD,MAKM,CAAAZ,QAAQ,QAAR,YAAAA,QAAQ,CAAEQ,IAAV,MAAmB,OAApB;;AAPT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAaA,WAAeK,kBAAf,CAAkCN,GAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CACyBO,KAAK,iDAA+CP,GAA/C,mCAD9B;;AAAA;AACUQ,YAAAA,OADV;AAAA;AAAA,6CAE2BA,OAAO,CAACC,IAAR,EAF3B;;AAAA;AAEQC,YAAAA,WAFR;AAGIR,YAAAA,OAAO,CAACC,GAAR,YAAqBO,WAAW,CAACC,IAAjC,mBAAmDD,WAAW,CAACb,OAAZ,CAAoBe,IAApB,CAAyBC,GAA5E;;AAHJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA,SACI,oBAAC,MAAD;AACI,IAAA,QAAQ,EAAE,CAACrB,OADf;AAEI,IAAA,KAAK,EAAC,yBAFV;AAGI,IAAA,OAAO,EAAEO,eAHb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ;AAQH","sourcesContent":["import * as React from 'react';\r\nimport * as WebBrowser from 'expo-web-browser';\r\nimport * as Facebook from 'expo-auth-session/providers/facebook';\r\nimport { ResponseType } from 'expo-auth-session';\r\nimport { Button } from 'react-native';\r\nimport { Alert } from 'react-native';\r\n\r\nWebBrowser.maybeCompleteAuthSession();\r\n\r\nexport default function FCFacebookLogin() {\r\n    const [request, response, promptAsync, token] = Facebook.useAuthRequest({\r\n        clientId: '874957936407265',\r\n        responseType: ResponseType.Token,\r\n    });\r\n\r\n    const [picture, setPicture] = React.useState();\r\n\r\n    async function LoginTofacebook() {\r\n        const res= await promptAsync();\r\n        if (response?.type === 'success') {\r\n            \r\n            console.log(\"ACCESS_TOKEN\", response.params.access_token);\r\n            loadDataFromServer(response.params.access_token);\r\n        }\r\n        else (response?.type === 'error')\r\n        {\r\n\r\n        }\r\n    }\r\n\r\n    async function loadDataFromServer(res){\r\n        const details= await fetch(`https://graph.facebook.com/me?access_token=${res}&fields=id,name,email,picture`);\r\n        let userDetails= await details.json();\r\n        console.log(`name: ${userDetails.name}\\npicture: ${userDetails.picture.data.url}`);\r\n    }\r\n\r\n\r\n    return (\r\n        <Button\r\n            disabled={!request}\r\n            title=\"Countinue with Facebook\"\r\n            onPress={LoginTofacebook}\r\n        />\r\n\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}