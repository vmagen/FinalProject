{"ast":null,"code":"import _extends from\"@babel/runtime/helpers/extends\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import _classCallCheck from\"@babel/runtime/helpers/classCallCheck\";import _createClass from\"@babel/runtime/helpers/createClass\";import _inherits from\"@babel/runtime/helpers/inherits\";import _possibleConstructorReturn from\"@babel/runtime/helpers/possibleConstructorReturn\";import _getPrototypeOf from\"@babel/runtime/helpers/getPrototypeOf\";function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=_getPrototypeOf(Derived),result;if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget);}else{result=Super.apply(this,arguments);}return _possibleConstructorReturn(this,result);};}function _isNativeReflectConstruct(){if(typeof Reflect===\"undefined\"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy===\"function\")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true;}catch(e){return false;}}import React,{Component}from'react';import times from'lodash/times';import PropTypes from'prop-types';import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Animated from\"react-native-web/dist/exports/Animated\";import PanResponder from\"react-native-web/dist/exports/PanResponder\";import Image from\"react-native-web/dist/exports/Image\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import Platform from\"react-native-web/dist/exports/Platform\";var STAR_IMAGE=require(\"./images/star.png\");var HEART_IMAGE=require(\"./images/heart.png\");var ROCKET_IMAGE=require(\"./images/rocket.png\");var BELL_IMAGE=require(\"./images/bell.png\");var TYPES={star:{source:STAR_IMAGE,color:'#f1c40f',backgroundColor:'white'},heart:{source:HEART_IMAGE,color:'#e74c3c',backgroundColor:'white'},rocket:{source:ROCKET_IMAGE,color:'#2ecc71',backgroundColor:'white'},bell:{source:BELL_IMAGE,color:'#f39c12',backgroundColor:'white'}};var SwipeRating=function(_Component){_inherits(SwipeRating,_Component);var _super=_createSuper(SwipeRating);function SwipeRating(props){var _this;_classCallCheck(this,SwipeRating);_this=_super.call(this,props);var _this$props=_this.props,onStartRating=_this$props.onStartRating,onFinishRating=_this$props.onFinishRating,fractions=_this$props.fractions;var position=new Animated.ValueXY();var panResponder=PanResponder.create({onStartShouldSetPanResponder:function onStartShouldSetPanResponder(){return true;},onPanResponderGrant:function onPanResponderGrant(){if(typeof onStartRating==='function'){onStartRating();}},onPanResponderMove:function onPanResponderMove(event,gesture){var newPosition=new Animated.ValueXY();newPosition.setValue({x:gesture.dx,y:0});if(_this.state.isComponentMounted){_this.setState({position:newPosition,value:gesture.dx});}},onPanResponderRelease:function onPanResponderRelease(event){var rating=_this.getCurrentRating(_this.state.value);if(rating>=_this.props.minValue){if(!fractions){_this.setCurrentRating(rating);}if(typeof onFinishRating==='function')onFinishRating(rating);}}});_this.state={panResponder:panResponder,position:position,display:false,isComponentMounted:false};return _this;}_createClass(SwipeRating,[{key:\"componentDidMount\",value:function componentDidMount(){var _STAR_IMAGE,_HEART_IMAGE,_ROCKET_IMAGE,_BELL_IMAGE;return _regeneratorRuntime.async(function componentDidMount$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(require(\"./images/star.png\"));case 3:_STAR_IMAGE=_context.sent;_context.next=6;return _regeneratorRuntime.awrap(require(\"./images/heart.png\"));case 6:_HEART_IMAGE=_context.sent;_context.next=9;return _regeneratorRuntime.awrap(require(\"./images/rocket.png\"));case 9:_ROCKET_IMAGE=_context.sent;_context.next=12;return _regeneratorRuntime.awrap(require(\"./images/bell.png\"));case 12:_BELL_IMAGE=_context.sent;this.setState({display:true,isComponentMounted:true});_context.next=19;break;case 16:_context.prev=16;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 19:this.setCurrentRating(this.props.startingValue);case 20:case\"end\":return _context.stop();}}},null,this,[[0,16]],Promise);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(this.props.startingValue!==prevProps.startingValue){this.setCurrentRating(this.props.startingValue);}}},{key:\"getPrimaryViewStyle\",value:function getPrimaryViewStyle(){var position=this.state.position;var _this$props2=this.props,imageSize=_this$props2.imageSize,ratingCount=_this$props2.ratingCount,type=_this$props2.type;var color=TYPES[type].color;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[0,ratingCount*imageSize/2,ratingCount*imageSize],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:color,width:width,height:width?imageSize:0};}},{key:\"getSecondaryViewStyle\",value:function getSecondaryViewStyle(){var position=this.state.position;var _this$props3=this.props,imageSize=_this$props3.imageSize,ratingCount=_this$props3.ratingCount,type=_this$props3.type;var backgroundColor=TYPES[type].backgroundColor;var width=position.x.interpolate({inputRange:[-ratingCount*(imageSize/2),0,ratingCount*(imageSize/2)],outputRange:[ratingCount*imageSize,ratingCount*imageSize/2,0],extrapolate:'clamp'},{useNativeDriver:true});return{backgroundColor:backgroundColor,width:width,height:width?imageSize:0};}},{key:\"renderRatings\",value:function renderRatings(){var _this$props4=this.props,imageSize=_this$props4.imageSize,ratingCount=_this$props4.ratingCount,type=_this$props4.type,tintColor=_this$props4.tintColor;var source=TYPES[type].source;return times(ratingCount,function(index){return React.createElement(View,{key:index,style:styles.starContainer},React.createElement(Image,{source:source,style:{width:imageSize,height:imageSize,tintColor:tintColor}}));});}},{key:\"getCurrentRating\",value:function getCurrentRating(value){var _this$props5=this.props,fractions=_this$props5.fractions,imageSize=_this$props5.imageSize,ratingCount=_this$props5.ratingCount;var startingValue=ratingCount/2;var currentRating=this.props.minValue?this.props.minValue:0;if(value>ratingCount*imageSize/2){currentRating=ratingCount;}else if(value<-ratingCount*imageSize/2){currentRating=this.props.minValue?this.props.minValue:0;}else if(value<=imageSize||value>imageSize){currentRating=startingValue+value/imageSize;currentRating=!fractions?Math.ceil(currentRating):+currentRating.toFixed(fractions);}else{currentRating=!fractions?Math.ceil(startingValue):+startingValue.toFixed(fractions);}return currentRating;}},{key:\"setCurrentRating\",value:function setCurrentRating(rating){var _this$props6=this.props,imageSize=_this$props6.imageSize,ratingCount=_this$props6.ratingCount;var initialRating=ratingCount/2;var value=null;if(rating>ratingCount){value=ratingCount*imageSize/2;}else if(rating<0){value=-ratingCount*imageSize/2;}else if(rating<ratingCount/2||rating>ratingCount/2){value=(rating-initialRating)*imageSize;}else{value=0;}var newPosition=new Animated.ValueXY();newPosition.setValue({x:value,y:0});if(this.state.isComponentMounted){this.setState({position:newPosition,value:value});}}},{key:\"displayCurrentRating\",value:function displayCurrentRating(){var _this$props7=this.props,ratingCount=_this$props7.ratingCount,type=_this$props7.type,readonly=_this$props7.readonly,showReadOnlyText=_this$props7.showReadOnlyText,ratingTextColor=_this$props7.ratingTextColor;var color=ratingTextColor||TYPES[type].color;return React.createElement(View,{style:styles.showRatingView},React.createElement(View,{style:styles.ratingView},React.createElement(Text,{style:[styles.ratingText,{color:color}]},\"Rating:\",' '),React.createElement(Text,{style:[styles.currentRatingText,{color:color}]},this.getCurrentRating(this.state.value)),React.createElement(Text,{style:[styles.maxRatingText,{color:color}]},\"/\",ratingCount)),React.createElement(View,null,readonly&&showReadOnlyText&&React.createElement(Text,{style:[styles.readonlyLabel,{color:color}]},\"(readonly)\")));}},{key:\"render\",value:function render(){var _this$props8=this.props,readonly=_this$props8.readonly,type=_this$props8.type,ratingImage=_this$props8.ratingImage,ratingColor=_this$props8.ratingColor,ratingBackgroundColor=_this$props8.ratingBackgroundColor,style=_this$props8.style,showRating=_this$props8.showRating;if(type==='custom'){var custom={source:ratingImage,color:ratingColor,backgroundColor:ratingBackgroundColor};TYPES.custom=custom;}return this.state.display?React.createElement(View,{pointerEvents:readonly?'none':'auto',style:style},showRating&&this.displayCurrentRating(),React.createElement(View,_extends({style:styles.starsWrapper},this.state.panResponder.panHandlers),React.createElement(View,{style:styles.starsInsideWrapper},React.createElement(Animated.View,{style:this.getPrimaryViewStyle()}),React.createElement(Animated.View,{style:this.getSecondaryViewStyle()})),this.renderRatings())):null;}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.setState({isComponentMounted:false});}}]);return SwipeRating;}(Component);SwipeRating.defaultProps={type:'star',ratingImage:require(\"./images/star.png\"),ratingColor:'#f1c40f',ratingBackgroundColor:'white',ratingCount:5,showReadOnlyText:true,imageSize:40,minValue:0};export{SwipeRating as default};var styles=StyleSheet.create({starsWrapper:{flexDirection:'row',justifyContent:'center',alignItems:'center'},starsInsideWrapper:{position:'absolute',top:0,left:0,right:0,bottom:0,flexDirection:'row',justifyContent:'center',alignItems:'center'},showRatingView:{flexDirection:'column',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingView:{flexDirection:'row',justifyContent:'center',alignItems:'center',paddingBottom:5},ratingText:{fontSize:15,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'},readonlyLabel:{justifyContent:'center',alignItems:'center',fontSize:12,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495a'},currentRatingText:{fontSize:30,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null},maxRatingText:{fontSize:18,textAlign:'center',fontFamily:Platform.OS==='ios'?'Trebuchet MS':null,color:'#34495e'}});var fractionsType=function fractionsType(props,propName,componentName){if(props[propName]){var value=props[propName];if(typeof value==='number'){return value>=0&&value<=20?null:new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be between 0 and 20\");}return new Error(\"`\"+propName+\"` in `\"+componentName+\"` must be a number\");}};SwipeRating.propTypes={type:PropTypes.string,ratingImage:PropTypes.node,ratingColor:PropTypes.string,ratingBackgroundColor:PropTypes.string,ratingCount:PropTypes.number,ratingTextColor:PropTypes.string,imageSize:PropTypes.number,onStartRating:PropTypes.func,onFinishRating:PropTypes.func,showRating:PropTypes.bool,style:PropTypes.object,readonly:PropTypes.bool,showReadOnlyText:PropTypes.bool,startingValue:PropTypes.number,fractions:fractionsType,minValue:PropTypes.number};","map":{"version":3,"sources":["C:/Users/vmage/OneDrive/Ruppin/שנה ג/סמסטר ב/FinalProject/react_native/node_modules/react-native-ratings/src/SwipeRating.js"],"names":["React","Component","times","PropTypes","STAR_IMAGE","require","HEART_IMAGE","ROCKET_IMAGE","BELL_IMAGE","TYPES","star","source","color","backgroundColor","heart","rocket","bell","SwipeRating","props","onStartRating","onFinishRating","fractions","position","Animated","ValueXY","panResponder","PanResponder","create","onStartShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","event","gesture","newPosition","setValue","x","dx","y","state","isComponentMounted","setState","value","onPanResponderRelease","rating","getCurrentRating","minValue","setCurrentRating","display","console","log","startingValue","prevProps","imageSize","ratingCount","type","width","interpolate","inputRange","outputRange","extrapolate","useNativeDriver","height","tintColor","index","styles","starContainer","currentRating","Math","ceil","toFixed","initialRating","readonly","showReadOnlyText","ratingTextColor","showRatingView","ratingView","ratingText","currentRatingText","maxRatingText","readonlyLabel","ratingImage","ratingColor","ratingBackgroundColor","style","showRating","custom","displayCurrentRating","starsWrapper","panHandlers","starsInsideWrapper","getPrimaryViewStyle","getSecondaryViewStyle","renderRatings","defaultProps","StyleSheet","flexDirection","justifyContent","alignItems","top","left","right","bottom","paddingBottom","fontSize","textAlign","fontFamily","Platform","OS","fractionsType","propName","componentName","Error","propTypes","string","node","number","func","bool","object"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport times from 'lodash/times';\nimport PropTypes from 'prop-types';\n\nimport {\n  View, Text, Animated, PanResponder, Image,\n  StyleSheet, Platform\n} from 'react-native';\n\n// RATING IMAGES WITH STATIC BACKGROUND COLOR (white)\nconst STAR_IMAGE = require('./images/star.png');\nconst HEART_IMAGE = require('./images/heart.png');\nconst ROCKET_IMAGE = require('./images/rocket.png');\nconst BELL_IMAGE = require('./images/bell.png');\n\nconst TYPES = {\n  star: {\n    source: STAR_IMAGE,\n    color: '#f1c40f',\n    backgroundColor: 'white'\n  },\n  heart: {\n    source: HEART_IMAGE,\n    color: '#e74c3c',\n    backgroundColor: 'white'\n  },\n  rocket: {\n    source: ROCKET_IMAGE,\n    color: '#2ecc71',\n    backgroundColor: 'white'\n  },\n  bell: {\n    source: BELL_IMAGE,\n    color: '#f39c12',\n    backgroundColor: 'white'\n  }\n};\n\nexport default class SwipeRating extends Component {\n  static defaultProps = {\n    type: 'star',\n    ratingImage: require('./images/star.png'),\n    ratingColor: '#f1c40f',\n    ratingBackgroundColor: 'white',\n    ratingCount: 5,\n    showReadOnlyText: true,\n    imageSize: 40,\n    minValue: 0\n  };\n\n  constructor(props) {\n    super(props);\n    const { onStartRating, onFinishRating, fractions } = this.props;\n    const position = new Animated.ValueXY();\n\n    const panResponder = PanResponder.create({\n      onStartShouldSetPanResponder: () => true,\n      onPanResponderGrant: () => {\n        if (typeof onStartRating === 'function') {\n          onStartRating();\n        }\n      },\n      onPanResponderMove: (event, gesture) => {\n        const newPosition = new Animated.ValueXY();\n        newPosition.setValue({ x: gesture.dx, y: 0 });\n        if (this.state.isComponentMounted) {\n          this.setState({position: newPosition, value: gesture.dx});\n        }\n      },\n      onPanResponderRelease: event => {\n        const rating = this.getCurrentRating(this.state.value);\n        if (rating >= this.props.minValue) {\n          if (!fractions) {\n            // 'round up' to the nearest rating image\n            this.setCurrentRating(rating);\n          }\n          if (typeof onFinishRating === 'function') onFinishRating(rating);\n        }\n      }\n    });\n\n    this.state = { panResponder, position, display: false, isComponentMounted: false };\n  }\n\n  async componentDidMount() {\n    try {\n      const STAR_IMAGE = await require('./images/star.png');\n      const HEART_IMAGE = await require('./images/heart.png');\n      const ROCKET_IMAGE = await require('./images/rocket.png');\n      const BELL_IMAGE = await require('./images/bell.png');\n\n      this.setState({ display: true, isComponentMounted: true });\n    } catch(err) {\n      console.log(err)\n    }\n\n    this.setCurrentRating(this.props.startingValue);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.startingValue !== prevProps.startingValue) {\n      this.setCurrentRating(this.props.startingValue);\n    }\n  }\n\n  getPrimaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const color = TYPES[type].color;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [0, (ratingCount * imageSize) / 2, ratingCount * imageSize],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor: color,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  getSecondaryViewStyle() {\n    const { position } = this.state;\n    const { imageSize, ratingCount, type } = this.props;\n\n    const backgroundColor = TYPES[type].backgroundColor;\n\n    const width = position.x.interpolate(\n      {\n        inputRange: [-ratingCount * (imageSize / 2), 0, ratingCount * (imageSize / 2)],\n        outputRange: [ratingCount * imageSize, (ratingCount * imageSize) / 2, 0],\n        extrapolate: 'clamp'\n      },\n      {\n        useNativeDriver: true\n      }\n    );\n\n    return {\n      backgroundColor,\n      width,\n      height: width ? imageSize : 0\n    };\n  }\n\n  renderRatings() {\n    const { imageSize, ratingCount, type, tintColor } = this.props;\n    const source = TYPES[type].source;\n\n    return times(ratingCount, index => (\n      <View key={index} style={styles.starContainer}>\n        <Image source={source} style={{ width: imageSize, height: imageSize, tintColor }} />\n      </View>\n    ));\n  }\n\n  getCurrentRating(value) {\n    // const { value } = this.state;\n    const { fractions, imageSize, ratingCount } = this.props;\n\n    const startingValue = ratingCount / 2;\n    let currentRating = (this.props.minValue) ? this.props.minValue : 0;\n\n    if (value > (ratingCount * imageSize) / 2) {\n      currentRating = ratingCount;\n    } else if (value < (-ratingCount * imageSize) / 2) {\n      currentRating = (this.props.minValue) ? this.props.minValue : 0;\n    } else if (value <= imageSize || value > imageSize) {\n      currentRating = startingValue + value / imageSize;\n      currentRating = !fractions ? Math.ceil(currentRating) : +currentRating.toFixed(fractions);\n    } else {\n      currentRating = !fractions ? Math.ceil(startingValue) : +startingValue.toFixed(fractions);\n    }\n\n    return currentRating;\n  }\n\n  setCurrentRating(rating) {\n    const { imageSize, ratingCount } = this.props;\n\n    // `initialRating` corresponds to `startingValue` in the getter. Naming it\n    // differently here avoids confusion with `value` below.\n    const initialRating = ratingCount / 2;\n    let value = null;\n\n    if (rating > ratingCount) {\n      value = (ratingCount * imageSize) / 2;\n    } else if (rating < 0) {\n      value = (-ratingCount * imageSize) / 2;\n    } else if (rating < ratingCount / 2 || rating > ratingCount / 2) {\n      value = (rating - initialRating) * imageSize;\n    } else {\n      value = 0;\n    }\n\n    const newPosition = new Animated.ValueXY();\n    newPosition.setValue({ x: value, y: 0 });\n    if (this.state.isComponentMounted) {\n      this.setState({position: newPosition, value});\n    }\n  }\n\n  displayCurrentRating() {\n    const { ratingCount, type, readonly, showReadOnlyText, ratingTextColor } = this.props;\n    const color = ratingTextColor || TYPES[type].color;\n\n    return (\n      <View style={styles.showRatingView}>\n        <View style={styles.ratingView}>\n          <Text style={[styles.ratingText, { color }]}>Rating:{' '}</Text>\n          <Text style={[styles.currentRatingText, { color }]}>{this.getCurrentRating(this.state.value)}</Text>\n          <Text style={[styles.maxRatingText, { color }]}>/{ratingCount}</Text>\n        </View>\n        <View>{readonly && showReadOnlyText && <Text style={[styles.readonlyLabel, { color }]}>(readonly)</Text>}</View>\n      </View>\n    );\n  }\n\n  render() {\n    const { readonly, type, ratingImage, ratingColor, ratingBackgroundColor, style, showRating } = this.props;\n\n    if (type === 'custom') {\n      let custom = {\n        source: ratingImage,\n        color: ratingColor,\n        backgroundColor: ratingBackgroundColor\n      };\n      TYPES.custom = custom;\n    }\n\n    return (\n      this.state.display ?\n      <View pointerEvents={readonly ? 'none' : 'auto'} style={style}>\n        {showRating && this.displayCurrentRating()}\n        <View style={styles.starsWrapper} {...this.state.panResponder.panHandlers}>\n          <View style={styles.starsInsideWrapper}>\n            <Animated.View style={this.getPrimaryViewStyle()} />\n            <Animated.View style={this.getSecondaryViewStyle()} />\n          </View>\n          {this.renderRatings()}\n        </View>\n      </View> :\n      null\n    );\n  }\n\n  componentWillUnmount() {\n    this.setState({ isComponentMounted: false });\n  }\n\n}\n\nconst styles = StyleSheet.create({\n  starsWrapper: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  starsInsideWrapper: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    bottom: 0,\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  showRatingView: {\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingView: {\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    paddingBottom: 5\n  },\n  ratingText: {\n    fontSize: 15,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  },\n  readonlyLabel: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    fontSize: 12,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495a'\n  },\n  currentRatingText: {\n    fontSize: 30,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null\n  },\n  maxRatingText: {\n    fontSize: 18,\n    textAlign: 'center',\n    fontFamily: Platform.OS === 'ios' ? 'Trebuchet MS' : null,\n    color: '#34495e'\n  }\n});\n\nconst fractionsType = (props, propName, componentName) => {\n  if (props[propName]) {\n    const value = props[propName];\n    if (typeof value === 'number') {\n      return value >= 0 && value <= 20\n        ? null\n        : new Error(`\\`${propName}\\` in \\`${componentName}\\` must be between 0 and 20`);\n    }\n\n    return new Error(`\\`${propName}\\` in \\`${componentName}\\` must be a number`);\n  }\n};\n\nSwipeRating.propTypes = {\n  type: PropTypes.string,\n  ratingImage: PropTypes.node,\n  ratingColor: PropTypes.string,\n  ratingBackgroundColor: PropTypes.string,\n  ratingCount: PropTypes.number,\n  ratingTextColor: PropTypes.string,\n  imageSize: PropTypes.number,\n  onStartRating: PropTypes.func,\n  onFinishRating: PropTypes.func,\n  showRating: PropTypes.bool,\n  style: PropTypes.object,\n  readonly: PropTypes.bool,\n  showReadOnlyText: PropTypes.bool,\n  startingValue: PropTypes.number,\n  fractions: fractionsType,\n  minValue: PropTypes.number\n};\n"]},"metadata":{},"sourceType":"module"}